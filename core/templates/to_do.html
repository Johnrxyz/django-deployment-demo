{% extends 'base.html' %}

{% block content %}
    <div class="todo-container">
        <form method="POST" class="add-form">
            {% csrf_token %}
            {{ form.title }} <button type="submit" class="add-button">+</button>
        </form>

        <ul class="task-list">
            {% for task in tasks %}
            <li class="task-item {% if task.completed %}completed{% endif %}">
                
                <div class="task-content"> 
                    <span class="task-title">{{ task.title }}</span>
                    <span class="task-timestamp">
                        {{ task.created_at|date:"M d, H:i" }} 
                    </span> 
                </div>
                
                <div class="controls">
                    
                    <a href="{% url 'complete_task' task.id %}" class="complete-btn" title="Toggle Completion">
                        ✓
                    </a>
                    
                    <form method="POST" action="{% url 'delete_task' task.id %}" class="delete-form">
                        {% csrf_token %}
                        <button type="submit" class="delete-button" title="Permanently Delete Task">
                             ✗ </button>
                    </form>
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>
{% endblock %}